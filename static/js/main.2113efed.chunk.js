(this["webpackJsonpreddit-clone"]=this["webpackJsonpreddit-clone"]||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var a=n(127),r=n(0),c=n.n(r),o=n(41),l=n.n(o),u=n(49),i=n(2),s=n(123),m=n(129),d=n(122),p=n(120),f=n(121),E=n(33),b=n.n(E),g=n(42),v=n(128),C=n(75),O=n(126),j=n(51),w=n(119),y=n(68),S=n.n(y).a.initializeApp({apiKey:"AIzaSyCfdlTwquvNc81p9OgSN1etPi5rvIEf2mA",authDomain:"my-first-project-ff4e0.firebaseapp.com",projectId:"my-first-project-ff4e0",storageBucket:"my-first-project-ff4e0.appspot.com",messagingSenderId:"1090971636269",appId:"1:1090971636269:web:1a3360427ec508a68a9ea4",measurementId:"G-2LF69LF840"}).firestore(),h=function(){var e=Object(v.a)(),t=e.isOpen,n=e.onOpen,a=e.onClose,o=Object(r.useState)(""),l=Object(i.a)(o,2),u=l[0],s=l[1],m=Object(r.useState)(""),d=Object(i.a)(m,2),f=d[0],E=d[1],y=Object(r.useState)(!1),h=Object(i.a)(y,2),k=h[0],x=h[1],A=function(){var e=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),t=new Date,e.next=4,S.collection("posts").add({title:u,posts:f,upVotesCount:0,downVotesCount:0,createdAt:t.toUTCString(),updatedAt:t.toUTCString()});case 4:a(),s(""),x(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(C.a,{onClick:n,colorScheme:"blue"},"Add new post"),c.a.createElement(O.a,{onClose:a,isOpen:t,isCentered:!0},c.a.createElement(O.g,null,c.a.createElement(O.d,null,c.a.createElement(O.f,null,"Add new post"),c.a.createElement(O.c,null),c.a.createElement(O.b,null,c.a.createElement(j.a,{id:"post-posts"},c.a.createElement(j.b,{bg:"gray.100",p:4,rounded:"md",w:"100%"},"Post Heading"),c.a.createElement(w.a,{type:"post-posts",value:f,onChange:function(e){return E(e.target.value)}}))),c.a.createElement(O.b,null,c.a.createElement(j.a,{id:"post-title"},c.a.createElement(j.b,null,"Post title"),c.a.createElement(w.a,{type:"post-title",value:u,onChange:function(e){return s(e.target.value)}}))),c.a.createElement(O.e,null,c.a.createElement(p.a,{spacing:4},c.a.createElement(C.a,{onClick:a},"Close"),c.a.createElement(C.a,{onClick:A,colorScheme:"blue",disabled:!u.trim(),isLoading:k},"Save")))))))},k=function(){return c.a.createElement(f.a,{position:"sticky",top:0,p:4,bg:"gray.100",zIndex:1},c.a.createElement(d.a,{maxW:"md",centerContent:!0},c.a.createElement(s.a,{justifyContent:"flex-end",w:"100%",position:"sticky",top:0},c.a.createElement(h,null))),c.a.createElement(d.a,{maxW:"md",centerContent:!0}))},x=n(125),A=n(124),I=n(38),V=function(e){var t=e.post,n=Object(r.useState)(!1),a=Object(i.a)(n,2),o=a[0],l=a[1],u=Object(r.useState)([]),s=Object(i.a)(u,2),m=s[0],d=s[1];Object(r.useEffect)((function(){var e=localStorage.getItem("votes")||[],t=[];try{t=JSON.parse(e)}catch(n){console.error(n)}d(t)}),[]);var f=function(e){var t=m;t.push(e),d(t),localStorage.setItem("votes",JSON.stringify(m))},E=function(){var e=Object(g.a)(b.a.mark((function e(n){var a,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),a=t.upVotesCount,r=t.downVotesCount,c=new Date,"upvote"===n?a+=1:r+=1,e.next=7,S.collection("posts").doc(t.id).set({title:t.title,upVotesCount:a,downVotesCount:r,createdAt:t.createdAt,updatedAt:c.toUTCString()});case 7:f(t.id),l(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){return m.indexOf(t.id)>-1};return c.a.createElement(c.a.Fragment,null,c.a.createElement(p.b,null,c.a.createElement(A.a,{size:"lg",colorScheme:"green","aria-label":"Upvote",icon:c.a.createElement(I.b,null),onClick:function(){return E("upvote")},isLoading:o,isDisabled:v()}),c.a.createElement(x.a,{bg:"gray.100",rounded:"md",w:"100%",p:1},t.upVotesCount)),c.a.createElement(p.b,null,c.a.createElement(A.a,{size:"lg",colorScheme:"blue","aria-label":"Downvote",icon:c.a.createElement(I.a,null),onClick:function(){return E("downvote")},isLoading:o,isDisabled:v()}),c.a.createElement(x.a,{bg:"gray.100",rounded:"md",w:"100%",p:1},t.downVotesCount)))},z=function(e){var t=e.post,n=function(){S.collection("posts").doc(t.id).delete()};return c.a.createElement(c.a.Fragment,null,c.a.createElement(p.b,null,c.a.createElement(A.a,{size:"lg",colorScheme:"red",icon:c.a.createElement(I.c,null),onClick:function(){return n()}})))},D=function(e){var t=e.post;return c.a.createElement(p.a,{key:t.id,w:"100%",alignItems:"flex-start"},c.a.createElement(V,{post:t}),c.a.createElement(f.a,{bg:"gray.100",p:4,rounded:"md",w:"100%"},c.a.createElement(x.a,null,t.posts),c.a.createElement(x.a,null,t.title)),c.a.createElement(z,{post:t}))},F=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(!0),l=Object(i.a)(o,2),f=l[0],E=l[1];return Object(r.useEffect)((function(){S.collection("posts").orderBy("createdAt","desc").get().then((function(e){var t=e.docs.map((function(e){return Object(u.a)({id:e.id},e.data())}));a(t),E(!1)}))}),[]),Object(r.useEffect)((function(){S.collection("posts").orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(u.a)({id:e.id},e.data()))})),a(t)}))}),[]),f?c.a.createElement(s.a,{minH:"100vh",justifyContent:"center",alignItems:"center"},c.a.createElement(m.a,null)):c.a.createElement(c.a.Fragment,null,c.a.createElement(k,null),c.a.createElement(d.a,{maxW:"md",centerContent:!0,p:8},c.a.createElement(p.b,{spacing:8,w:"100%"},n.map((function(e){return c.a.createElement(D,{post:e,key:e.id})})))))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(a.a,null,c.a.createElement(F,null))),document.getElementById("root"))},84:function(e,t,n){e.exports=n(107)}},[[84,1,2]]]);
//# sourceMappingURL=main.2113efed.chunk.js.map